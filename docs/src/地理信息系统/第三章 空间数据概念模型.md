# 空间数据概念模型

空间数据概念模型可以分为以下几种：

- 对象模型。例如建筑、树木等设施等
- 场模型。例如污染物扩散、河流淹没等
- 网络模型。例如道路、管道等
- 时空模型。例如车的轨迹、高频次检测数据等
- 多维数据模型

## 概念模型的选择

### 一、对象模型

对象数据模型也叫做`要素模型`，将研究的整个地理空间看成一个空域，地理现象和空间实体作为独立的对象分布在该空域中。按照其空间特征分为点、线、面、体四种基本对象，对象也可能与其他对象构成复杂对象，并且与其他分离的对象保持特定的关系，如点、线、面、体之间的拓扑关系。每个对象对应着一组相关的属性以及区分各种不同的对象。

**对象模型的适用**

对象模型强调地理空间中的单个地理现象。任何现象，无论大小只要能从概念上与其相邻的其他现象分离开来，都可以被确定为一个对象。对象模型一般适合于对具有明确边界的地理现象进行抽象建模，如建筑物、道路、公共设施和管理区域等人文现象以及胡泊、河流、岛屿和森林等自然现象，因为这些现象可被看做是离散的单个地理对象。

**对象模型的基本表达方式**

对象模型把地理现象当做空间要素或空间实体。一个空间要素必须同时符合 3 个条件：`可被识别`、`在观察中的重要程度`、`有明确的特征且可被描述`。

### 二、场模型

场数据模型也称作`域模型`，是把地理空间中的现象作为连续的变量或体来看待，如大气污染程度、地表温度、土壤湿度、地形高度以及大面积空气和水域的流速和方向等。

根据不同的应用，场可以表现为二维或三维。一个二维场就是在二维空间 R² 中任意给定的一个空间位置上，都有一个表现某现象的属性值，即 A = f(x,y)。一个三维场是在三维空间 R 中任意给定一个空间位置上，都对应一个属性值。一些现象如大气污染的空间分布本质上是三维的，但为了便于分析和表达，往往采用二维空间来表示。

在不考虑时间变化时，二维空间场一般采用六种具体的场数据模型来描述：

- 规则分布的点
- 不规则分布的点
- 规则矩形区
- 不规则多边形区
- 不规则三角形区
- 等值线
  ![对象模型](/images/geometry/3-空间数据概念模型/changmodel.png)

### 三、网络模型

网络数据模型，他与对象模型的某些方面相同，都是描述不连续的地理现象，不同之处在于它需要考虑通过路径相互连接多个地理现象之间的连通情况。网络是由欧式空间中的若干点以及他们之间相互连接的线构成，亦即在地理空间中，通过无数通道相互连接的一组地理空间位置。现实世界许多地理事物和现象可以构成网络，如公路等都可以表示成相应的点之间的连线，由此构成现实世界中多种多样的地理网络。

**网络模型的应用**

基于网络数据模型，可以解决路径选择、设施布局优化、资源分配、空间相互作用和引力分析等问题。结合复杂网络的引力模型，可用于理解某点或区域的人流、物流和资金流的流动，典型的问题，如人们总是选择距离近、交通较为便捷的商场去购物，但可能更愿意去较远地方的注明医院去看病就医。

### 四、时空数据模型

简称时空模型，主要用于表达地理现象或实体的特征或相互关系随时间变化的动态过程和静态结果。在时空数据模型中，空间、时间和属性构成了地理现象或对象的三个基本要素。现实世界中几乎所有对象都会在一定的时间尺度上发生变化，随着空间数据采集技术的不断提升，尤其是大数据技术的发展，可获得空间数据的时间特征越来越容易，时空数据模型的表达、管理和分析方法已经成为 GIS 领域的研究热点。同时，失控数据模型也是时态 GIS（TGIS）的核心内容。

### 五、多维数据模型

多维数据模型一般指数据维度多于两个维度的三维数据模型或更多维度的数据模型。地理信息系统中的多维数据通常用于表达某种地理现象或实体的属性或相互关系在特定的区域内不仅随着时间变化，而且其变化还随着其他属性变化而发生改变的问题。

## 空间数据类型及其表示

### 空间数据类型

地理信息中的数据来源和数据类型很多，概括起来主要有以下 4 种：

- 几何图形数据。来源于各种类型的地图和实测几何数据。几何图形数据不仅反映空间实体的地理位置，还要反映实体间的空间关系。
- 像素数据。主要来源于卫星遥感、航空遥感和摄影测量等
- 属性数据。来源于实测数据，文字报告，或地图中的各类符号说明，以及从遥感影像数据通过解释得到的信息等
- 元数据。对空间数据进行推理、分析和总结得到的关于数据的数据，如数据来源、数据权属、数据产生的时间、数据精度、数据分辨率、数据比例尺、地理空间参考基准、数据转换方法等。

### 几何图形数据的表示方法

几何图形数据是空间数据的常用表示方法之一。这些不同类型的数据都可抽象表示为点线面体等基本的图形要素
![几何图形数据](/images/geometry/3-空间数据概念模型/img3.png)

### 几何图形数据的表示方法

- 点：点既可以是一个标识空间点状实体，如水塔，也可以是标记点，仅用于特征的标注和说明，或作为面域的内点用于标明该面域的属性，或是线的起点、终点或交点，则称为结点（node）。
- 线：具有相同属性点的轨迹，线的起点和终点表明了线的方向。道路、河流、地形线、区域边界等均属于线状地物可抽象为线。线上各点具有相同的公共属性并至少存在一个属性。当线连接两个结点时，也称作弧段（arc）或链（link）
- 面：是线包围的有界连续的具有相同属性值的面域，或称为多边形。多边形可以嵌套，被多边形包含的多边形称为岛。
- 体：体数据主要用于表示三维地理对象。例如三维的建筑物，三维道路等，均可以通过体要素表示。

空间的点、线、面、体可以按照一定的地理意义组成区域（region），有时称为一个覆盖（coverage），或数据平面（data plane）。各种专题图在 GIS 中都可以表示为一个数据平面。扩展至三维空间，可以通过点、线、面、体和体综合表示。

### 空间数据类型的划分

在空间几何图形数据中，点是最为基本的几何图形要素，其他类型的几何图形都是基于点数据构建。因此，基本的几类几何图形数据之间可以实现相互转换。按照维度划分，一般而言，点属于 0 维的数据，线属于一维的数据，面则是属于二维的数据，体是三维数据。这是根据数据科学的标准对数据维度进行划分。
![空间数据类型的划分](/images/geometry/3-空间数据概念模型/img1.png)

点与线

点数据使用坐标进行存储。在二维平面上，某点 P 可以存储为 P(x,y),如果点数据含有高程信息，则可以存储为 p(x,,y,z)。从这个意义上讲，前者属于二维点要素，后者则属于三维点要素。线要素实际上是由多个点连接后的结果。如果一条线上的所有节点都是二维点，则会构建二维线要素。如果都是三维节点，则会生成三维要素。三维线的构建本质上是由点的高程属性以及点的序列关系所决定的。
![点与线](/images/geometry/3-空间数据概念模型/img4.png)

线面体

闭合的线可以构建面，如果面中包含三维的线，则可以构建三维矢量面。至少三条直线就可以构建一个面。基于多个面可以构建多面体。一般而言，封闭的多面体较为常用。如果 c、d 所示为基于面构建的不同多面体。在 c 中，面 A1、A2、A3、A4、A5 共同构建了一个封闭的五面体。
![线面体](/images/geometry/3-空间数据概念模型/img5.png)

影像数据特征及其表示方法

影像数据又称为像素数据，是另外一种表示空间数据的常用表达方式。日常生活中的各类图片均属于像素数据，`像素数据的最小分割单元通常称之为像元。像素数据的基本特征包括像元的大小、像元空间分辨率与空间比例尺的关系、像元的取值方法等几个方面`。

像元大小

像元大小决定了影像数据所表达对象的详细程度，像元一般使用相同宽度和高度的方格表示。如下图所示，一个面对象可以采用不同像元大小的像素数据表示，像元越小，则表达越精细。
![像元](/images/geometry/3-空间数据概念模型/img6.png)

影像数据的空间分辨率与比例尺

影像数据的空间分辨率是指像元大小所表示的在地面上覆盖面积的尺寸。因此，如果一个像元的覆盖面积为 5m\*5m，则分辨率为 5m。影像的分辨率越高，像元大小越小，从而详细程度越高，这和比例尺相反。比例尺越小，显示的细节越少。

像元的取值

像素单元取值是唯一的，但由于收到栅格大小的限制，栅格单元中可能会出现多个地物。在决定栅格单元值时应尽量保持其真实性，要确定该单元的属性取值，可根据需要选用取像元的中心点的值或是从像元的整体区域取值。
![像元的取值](/images/geometry/3-空间数据概念模型/img7.png)

空间关系

空间关系式指地理空间实体之间相互作用的关系。空间关系主要有：

- 拓扑空间关系：用来描述实体间的相邻、联通、包含和相交等关系；
- 顺序空间关系：用于描述实体在地理空间上的排列顺序，如实体之间前后、上下、左右和东南西北等方位关系
- 度量关系：用于描述空间实体之间的距离远近等关系

对空间关系的描述是多种多样的，有定量的，也有定性的，有精确地，也有模糊的。各种空间关系的描述也非绝对独立，而是具有一定联系。对空间关系的描述和表达，是 GIS 能够进行复杂空间分析的重要原因。

空间拓扑关系

地图上的拓扑关系是指图形在保持连续状态下的变形（缩放、旋转和拉伸等，比如投影转换），但是图形关系不变的性质。地图上各种图形的形状、大小会随图形的变形而改变，但是图形要素间的邻接关系、关联关系、包含关系和连通关系保持不变。俗称的拓扑关系是绘在橡皮上的图形关系，或者说拓扑空间中不考虑距离函数。

空间拓扑关系
(1)邻接关系。空间图形中同类元素之间的拓扑关系。例如多边形之间的邻接关
系 P1,与 P2、P4，P4 与 P1、P2 等;结点之间的邻接关系 N1 与 N2、N3 等;
（2)关联关系。空间图形中不同类元素之间的拓扑关系。例如结点与弧段的关联
关系 N1 与 A1、A2、A3;N2 与 A1、A6、A7 等;弧段与多边形的关联关系 A1 与 P1，A2 与 P1
等；弧段与
结点的关联关系 A1 与 N1、N2，A2 与 N1、N3 等；多边形与弧段的拓扑关联关系 P1 与
A1、A2、A7，P4 与 A2、A3、A5、A4 等。
(3）包含关系。空间图形中不同类或同类但不同级元素之间的拓扑关系。例如多
边形 P4 中包含 P3。
(4)连通关系。空间图形中弧段之间的拓扑关系。例如 A1 与 A2、A6 和 A7 连通。

![空间拓扑关系](/images/geometry/3-空间数据概念模型/img8.png)

空间实体间的拓扑关系

除了在逻辑上定义结点、弧段和多边形来描述图形要素的拓扑关系外，不同类型的空间实体间也存在着拓扑关系。分析点线面三种类型的空间实体，他们两两之间存在着分离、相邻、重合、包含或覆盖、相交 5 种可能得关系。

空间拓扑关系的意义

空间数据的拓扑关系，对数据处理和空间分析具有重要的意义：

- 拓扑关系能清楚的反映实体之间的逻辑结构关系，它比集合坐标关系有更大的稳定性，不随投影变换而变化。
- 利用拓扑关系有利于空间要素的查询，例如，某条铁路通过哪些地区，某县与哪些县邻接。又如分析某河流能为哪些地区的居民提供水源，某胡泊周围的土地类型以及对生物、栖息环境做出评价等。
- 可以根据拓扑关系重建地理实体。例如根据弧段构建多边形，实现道路的选取，进行最佳路径的选择等。

  因此再描述空间数据的逻辑模型时，通常将拓扑空间关系作为一个主要的内容

度量空间关系

度量空间关系主要指空间实体间的距离关系。也可以按照拓扑空间关系中建立点-点、点-线、点-面、线-线、线-面和面-面等不同组合来考察不同类型空间实体间的度量关系。距离的度量可以是定量的，如按欧几里得距离算出 A 实体距离 B 实体 500m，也可以应用于距离概念相关的概念如远近等进行定性的描述。与顺序空间关系类似，距离值随投影和几何变换而变化。建立点-点的度量关系容易，建立点-线和点-面的度量关系较难，而线-面、线-线和面-面的度量关系更为困难，涉及大量的判断和计算。在 GIS 中，一般也不明确描述度量空间关系。

顺序空间关系

顺序空间关系式基于空间实体在地理空间的分布，采用上下、左右、前后、东南西北等方向性名词来描述。同拓扑关系的形式化描述类似，也可以按点-点、点-线、点-面、线-线、线-面和面-面等多种组合来考察不同类型空间实体间的顺序关系。
![顺序空间关系](/images/geometry/3-空间数据概念模型/img9.png)
