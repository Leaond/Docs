# 图片的性能优化

## 图像资源优化的核心

压缩式图像资源优化的核心。无论是选取何种图像的文件格式，还是针对同一种格式压缩到更小的尺寸，本质上都是`使用更小的资源开销来完成图像的传输和展示`。

## 图像的分类

常见的图像分类

### 矢量图

矢量图的图形元素用一个对象来表示，包括颜色、大小、形状以及屏幕位置等属性。适合用在文本、logo 等构图形状简单的几何图形。常见的矢量图是 SVG 格式，它是一种基于 XML 格式的图像。

矢量图能够在任何缩放比例下呈现出细节相同清晰的展示效果。但是它又对细节的展示效果不够丰富，对于足够复杂的图像来说，是不适合采用矢量图来表示的。因为这不仅会导致图片的大小过大而且最终的展示效果也不会达到一个理想的状态。

SVG 标签所包含的部分是矢量图的全部内容，除了必要的绘制信息，可能还包括了一些元数据，比 XML 命名空间、图层及注释信息。这些信息对浏览器绘制一个 SVG 来说并不是必要的，所以在使用前可以通过工具去除这些元数据来达到压缩的目的。

### 位图

位图是通过对一个矩阵中的栅格进行编码来表示图像的，每个栅格只能编码表示一个特定的颜色，如果组图像的上个像素点越多且每个像素点所能表示的颜色范围越广，则位图图像整体的显示效果就会越逼真。`位图没有矢量图那种不受分辨率影响的特性，但是对于复杂的图片却能够提供较为真实的细节体验。`,当把图像不断放大后，就会看到许多的栅格像素块，每个像素存储的事图像局部的 RGBA 信息。

`一个像素点4个通道就是4个字节，一张图像整体的大小与其包含的像素数成正比，图像包含的像素越多，所能展示的细节就越丰富，同时图像就越大。`

## 图像的压缩

对于图像文件而言，由于人眼对于不同颜色的敏感度存在差异，所以压缩的大致思路就是通过减少对某种颜色的编码位数来减少文件大小，甚至可以损失部分原文件信息，已达到近似的效果，使得压缩后的文件尺寸更小。

## 图像的格式

### JPEG

JPEG 是一种`有损压缩`算法，它通过去除相关冗余图像和色彩数据等方式来获得较高的压缩率，同时还能展现出相当丰富的图像内容。
JPEG 在网站开发中经常被用作背景图等，以呈现色彩丰富的内容。但是由于是有损压缩，当处理需要较强线条感和强烈颜色对比等场景的时候，JPEG 图像可能会出现一些边界模糊的不佳体验。`JPEG是不支持透明度的`。

JPEG 包含了多种压缩模式，其中常见的有基于基线的和渐进式的。

#### 基线式压缩模式

基线式的 JPEG 加载顺序是自上而下的，当网络连接缓慢或不稳定时，其是从上而下逐渐加载完成的。

#### 渐进式的压缩模式

渐进式模式是将图像文件分为多次扫描，首先展示的是一个低质量模糊的图像，随着扫描到的图像信息不断增多，每次扫描过后展示的图像清晰度也会不断提升。渐进式 JPEG 的优点是显而易见的，在网络连接缓慢的情况下，首先能快速加载出一个图像质量比较模糊的预览版本，这样用户便可据此了解图像的大致内容。

渐进式 JPEG 的解码速度会比基线的要慢一些，因为它增加了重复的检索开销。

### GIF

GIF 是一种比较早的图像文件格式。由于对支持颜色数量的限制，256 色远小于展示照片所需颜色的数量级，所以 GIF 并不适合来呈现照片，当下只有在需要使用到动画时才会使用 GIF。GIF 展示的动画没有声音，如果动画的时间比较长即便是压缩过后的文件也会比较大。

参考文档['https://juejin.cn/post/7408182870135570466#heading-12']
