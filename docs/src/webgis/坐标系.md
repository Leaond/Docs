# 坐标系

坐标系统分为地理坐标系统和投影坐标系统两大类。

## 地理坐标系

地理坐标系(GCS，经纬度坐标系、地球坐标)是使用三维球面来定义地球表面位置，以实现通过经纬度对地球表面点位引用的坐标系。一个地理坐标系包括`角度测量单位`、`本初子午线`、`参考椭球体`三个部分。`在球面系统中，水平线是等纬度线，垂直线是等经度线`.
![地理坐标系]()

- 地理坐标系是对地球椭球体而言，其围绕旋转的轴叫做`地轴`。
- 地轴的北端称为地球的`北极`，南端称为`南极`。
- 过地心与地轴垂直的平面与椭球面的交线是一个圆，这就是地球的`赤道`。
- 过英国格林威治天文台旧址和地轴平面与椭球面的交线称为`本初子午线`。
- 以本初子午线为基准，向东、向西各分为 180 度，分别称为`东经和西经`。
- 以赤道为基准，向南、向北各分为了 90 度，分别称之为`北纬和南纬`。

### 弧度地理坐标

在 gis 中，地理坐标通常指的是地球上某个点的位置，使用经纬度来表示。但是，由于地球是一个近似的椭球体，使用弧度而非角度来表示经纬度坐标可以避免在计算中引入某些复杂性，尤其是在进行距离和面积的测量时。
![地理坐标系]()
弧度是一种角度的度量单位，它基于圆的周长和半径之间的关系。一个完整的圆周被定义为 2π 弧度。
![地理坐标系]()

```js
1rad	= 57.2958°
1°  = 0.01745rad
```

地理坐标弧度的应用：

- 距离计算： 使用球面三角学公式，可以更准确的计算出两点之间的距离。
- 方向计算： 确定一个点到另一个点的方向，使用弧度可以简化计算过程。
- 地图投影： 在某些地图投影中，使用弧度可以更自然地处理地球表面的曲率。

## 屏幕坐标系

屏幕坐标系是一种二维坐标系统，它用于描述屏幕上的点或区域的位置。屏幕坐标系通常以屏幕的左上角为原点（0,0），水平向右为 x 轴的正方向，垂直向下为 y 轴正方向。

在 Cesium 中屏幕坐标系叫做二维笛卡尔平面坐标（Cartesian2）.

```js
new Cesium.Cartesian2(x, y);
```

## 空间直角坐标系

在 gis 中，空间直角坐标系是一种三维坐标系统，用于在三维空间中精确地表示点线面的位置。

## 什么是投影坐标系

## 为什么需要投影坐标系

由于地球是一个球面，而地图受限于存储介质(纸张、屏幕等)的原因，需要使用二维平面来表达三维的地球，而将地球表面展开成地图平面必然会产生裂隙或者褶皱，因此需要采用一定的数学方法将曲面展开成平面，而且使其变形较小，这就是投影坐标系的意义所在。

投影坐标系在二维平面中进行定义，投影坐标系始终基于`地理坐标系`，通过网格上的(x,y)坐标来标识位置，其原点位于网格中心。每个位置均具有两个值，这两个值是相对该中心位置的坐标。一个指定其水平位置，另一个指定其垂直位置，在二维空间范围内，投影坐标系的长度和角度和面积恒定。

## 常见的坐标系

### BD09 坐标系

BD09（Baidu Coordinate System）是百度地图使用的一种坐标系。它基于 GCJ02 坐标系进行了加密偏移，提供了更好的数据保护性能，适用于百度地图定位和导航服务。BD09 通常用于中国境内各种位置服务应用。

## GCJ02 坐标系

GCJ02（国测局坐标系）是中国国家测绘局制定的一种地理坐标系，用于对中国大陆的地理位置进行偏移加密处理。GCJ02 坐标系也被称为火星坐标系，广泛应用于中国各种地图和位置服务应用，包括高德地图、腾讯地图等。

## WGS84 坐标系

WGS84（World Geodetic System 1984）是目前全球最常用的地理坐标系，由美国国防部和国际地球测量与地理信息协会共同制定。WGS84 坐标系使用 GPS 技术对地球表面进行测量，常用于全球定位系统（GPS）和许多其他位置服务应用。

## 大地 2000 坐标系

2000 国家大地坐标系（英语：China Geodetic Coordinate System 2000，缩写 CGCS2000），是中华人民共和国推出的一个国家大地坐标系，是制作国家基本比例尺地图的基础

## Cesium 中坐标系转换

### 经纬度转空间直角

```js
const cartesian3 = Cesium.Cartesian3.fromDegrees(lng, lat, height);
```

### 经纬度转弧度

```js
const radians = Cesium.Math.toRadians(degrees);
```

### 弧度转经纬度

```js
const degrees = Cesium.Math.toDegrees(radians);
```

### 空间直角转经纬度

```js
// 先将3D笛卡尔坐标转为地理坐标（弧度）
const cartographic = Cesium.Cartographic.fromCartesian(cartesian3);
// 再将地理坐标（弧度）转为经纬度
const lat = Cesium.Math.toDegrees(cartographic.latitude);
const lng = Cesium.Math.toDegrees(cartographic.longitude);
const height = cartographic.height;
```

### 屏幕坐标转经纬度

```js
// 监听点击事件，拾取坐标
const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
handler.setInputAction((e) => {
  const clickPosition = viewer.scene.camera.pickEllipsoid(e.position);
  const randiansPos = Cesium.Cartographic.fromCartesian(clickPosition);
  console.log(
    "经度：" +
      Cesium.Math.toDegrees(randiansPos.longitude) +
      ", 纬度：" +
      Cesium.Math.toDegrees(randiansPos.latitude)
  );
}, Cesium.ScreenSpaceEventType.LEFT_CLICK);
```

### 屏幕坐标转空间直角坐标

```js
var cartesian3 = viewer.scene.globe.pick(
  viewer.camera.getPickRay(windowPostion),
  viewer.scene
);
```

[参考](https://zhuanlan.zhihu.com/p/657968838)
