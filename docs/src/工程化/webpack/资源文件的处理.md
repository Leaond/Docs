
# 资源文件的处理
一个项目的资源文件通常包括css样式资源、JS资源、图片资源、字体图标资源等。下面将介绍webpack处理这些资源时我们需要使用到的loader。
[Webpack 官方 Loader 文档](https://webpack.docschina.org/loaders/)
## css资源
css资源主要包括css、less、sass、styl样式资源等。webpack本身是不能够识别样式资源的，所以我们需要使用loader帮助webpack能够解析这些资源。

css资源处理主要需要使用两个loader：`css-loader`、`style-loader`。

- `css-loader` 负责将css文件编译成webpack能够识别的模块；
- `style-loader` 的作用是动态创建一个style标签，然后将`css-loader`编译后的模块插入到style标签中。这样通过css文件定义的样式就会在html中以style标签的形式生效。

我们可以尝试在刚刚创建的项目中添加一个css文件，然后在main.js中引入这个css文件
```css
/* index.css */
.box{
    width:200px;
    height:200px;
    background-color: pink;
}

```
使用webpack编译，我们会得到下面的结果：
[报错]()
#### 下载 css-loader、style-loader
```js
// 下载loader
npm i css-loader style-loader -D
```
#### 配置 loader
```js{9-14}
// webpack.config.js
module.exports = {
  // 入口
  entry: "./src/main.js",
  // 输出
  output: {},
  // 加载器
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
    ],
  },
  // 插件
  plugins: [],
  // 模式
  mode: "development",
};
```
#### 编译
使用webpack命令编译之后可以在`dist\mian.js`中发现刚刚写的css文件已经被编译了。我们可以在index.html中将编译后的main.js引入，可以发现刚刚写的样式生效了。
[图片]()

### less资源
对于less资源，我们需要安装less-loader。

- `less-loader`：负责将 Less 文件编译成 Css 文件

新建一个index.less文件，然后在main.js中引入
```css
.box2{
    width:200px;
    height:200px;
    background-color: rgb(228, 65, 92);
}
```

配置
```js
// webpack.config.js
module.exports = {
  // 入口
  entry: "./src/main.js",
  // 输出
  output: {},
  // 加载器
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
      {
        test: /\.less$/i,
        use: [
          // compiles Less to CSS
          'style-loader',
          'css-loader',
          'less-loader',
        ],
      },
    ],
  },
  // 插件
  plugins: [],
  // 模式
  mode: "development",
};
```

### sass和scss资源
sass和scss资源处理的loader都一样，需要安装`sass-loade`和sass.

- `sass-loader`：负责将 Sass 文件编译成 css 文件
- `sass`：`sass-loader` 依赖 `sass` 进行编译

这里以index.sass文件作为例子，scss文件同理。
```css
/* index.sass */
.box3
    width: 200px
    height: 200px
    background-color: rgb(212, 221, 38)

```
配置
```js
module.exports = {
  // 入口
  entry: "./src/main.js",
  // 输出
  output: {},
  // 加载器
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
      {
        test: /\.less$/i,
        use: [
          // compiles Less to CSS
          'style-loader',
          'css-loader',
          'less-loader',
        ],
      },
      {
        test: /\.s[ac]ss$/i,
        use: [
          // 将 JS 字符串生成为 style 节点
          'style-loader',
          // 将 CSS 转化成 CommonJS 模块
          'css-loader',
          // 将 Sass 编译成 CSS
          'sass-loader',
        ],
      },
    ],
  },
  // 插件
  plugins: [],
  // 模式
  mode: "development",
};
```

### styl资源

```js
npm install stylus stylus-loader --save-dev
```
index.styl
```css
.box4 {
  width: 100px;
  height: 100px;
  background-color: lightpink;
}
```

配置
```js
module.exports = {
  // 入口
  entry: "./src/main.js",
  // 输出
  output: {},
  // 加载器
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
      {
        test: /\.less$/i,
        use: [
          // compiles Less to CSS
          'style-loader',
          'css-loader',
          'less-loader',
        ],
      },
      {
        test: /\.s[ac]ss$/i,
        use: [
          // 将 JS 字符串生成为 style 节点
          'style-loader',
          // 将 CSS 转化成 CommonJS 模块
          'css-loader',
          // 将 Sass 编译成 CSS
          'sass-loader',
        ],
      },
      {
        test: /\.styl$/,
        use: ["style-loader", "css-loader", "stylus-loader"],
      },
    ],
  },
  // 插件
  plugins: [],
  // 模式
  mode: "development",
  
};

```

## 图片资源

过去在 Webpack4 时，我们处理图片资源通过 `file-loader` 和 `url-loader` 进行处理

现在 Webpack5 已经将两个 Loader 功能内置到 Webpack 里了，我们只需要简单配置即可处理图片资源.

接下来我们对刚刚的样式文件做一些更改，引入图片作为背景。
```css
.box2{
    width:200px;
    height:200px;
    background-color: rgb(228, 65, 92);
    background: url('../images/1.jpeg') no-repeat;
    background-size: 100%;
}
```

这时候可以直接使用webpack进行编译。通过观察编译过后的产物dist，我们可以发现刚刚引入的文件已经被输出到了dist下面。




